# EGG

## EGGとは

YouTubeライブのチャット内容をもとに、設定した単語に反応して配信画面をにぎやかにするソフトです。

画像はPNG、動画はアニメーションPNGに対応しております。拡張子が「png」となっているものをご使用ください。

https://user-images.githubusercontent.com/23465174/222954060-3c566fd6-5ccd-47c8-ab29-78f5ae8b6743.mp4


## 注意事項

本ソフトはOBSのブラウザソースで使用することを想定しています。

ダウンロード後に解凍し、お好きな場所に保存してください。

中のフォルダ構造を変更してしまうと動作しなくなってしまうので、使い方で説明される箇所以外には変更を加えないでください。

## 配信時の操作

事前準備が済んでいれば、難しい操作は必要ありません。

1. YouTubeChatSocktを起動し、配信タイトルが正しいことを確認する。
2. OBSを起動する。

以上です。

これだけでEGGが動作します。

## 事前準備

### 「YouTubeChatSocket」ダウンロード

1. [商品ページ](https://ryumaryama.booth.pm/items/3962159)からファイルをダウンロードする
2. 解凍し、任意の場所にフォルダを配置する
3. 「YouTubeChatSocket」の[初期設定](https://ryumaryama.booth.pm/items/3962159)に従って設定する

### 「EGG」ダウンロード

1. [商品ページ](https://ryumaryama.booth.pm/items/4595151)からファイルをダウンロードする
2. 解凍し、任意の場所にフォルダを配置する

### OBS設定

1. OBSを起動する
2. 「シーン」を作成・選択し、ソース内の「ソース追加」から「ブラウザソース」を作成する
3. 「ローカルファイル」にチェックを入れる
4. 右側に現れた「参照」ボタンをクリック
5. 「EGG」フォルダ内の「egg（egg.html）」をクリック
6. 「幅」を960、「高さ」を540（※）に指定し、右下のOKを押す
7. 設定したブラウザソースを選択し、表示画面に現れる枠を調整して表示範囲を設定する

#### ※補足
こちらはあくまで推奨設定です。

EGGで使用する画像やアニメーションの画像サイズに合わせて設定を変更してください。

下で説明する参考素材はこちらの設定に合わせて作成されています。

### 画像、アニメーション（ギフト）の設定

EGGではコメントに反応する画像、アニメーション素材のことをギフト（贈り物）と表現しています。

その設定について説明します。

#### 概要

EGGは「ギフト」と「コメント」の紐づけ設定を行うことで動作させます。

例えば以下のようなパターンがあります。

- コメント「♪、8888」に対して「コンサートライトを振るアニメーション」を表示
- コメント「草、www、笑」に対して「草の画像」を表示
- コメント「こんにちは」に対して「右手を振るアニメーション」を表示

この設定をどのように行うか、順に説明します。

#### 設定場所

EGGは「gift」フォルダの中にフォルダを作成し、設定ファイルを設置することで設定できます。

参考素材として「コンサートライト」、「草」が設定されていますので、ご自由に活用ください。

「Template」フォルダは今後新規に設定を行う際にコピペなどでお使いください。

#### ギフトフォルダの作成

「gift」フォルダにある「Template」フォルダをコピー&ペーストして新たにフォルダを作成します。

これがひとまとまりのギフト設定になります。

設定後のフォルダ構造を例として表示します。

- `gift/コンサートライト/setting.json`
- `gift/始めのあいさつ/setting.json`
- `gift/終わりのあいさつ/setting.json`
- `gift/初見/setting.json`
- `gift/草/setting.json`

![giftの中身](https://user-images.githubusercontent.com/23465174/222954011-bf220b38-899b-4010-b33b-2bfd465f815b.png)

#### ギフト素材の追加

作成したフォルダにpng形式のデータを入れることで素材の追加になります。

参考素材であるコンサートライトの例がこちらです。

![コンサートライトの中身](https://user-images.githubusercontent.com/23465174/222954020-69aea183-0e17-4d67-843d-334ed2d1ccd9.png)

1フォルダにまとめられた素材に対して、対応するコメントなどを設定することになります。

#### 対応コメントなどの設定

フォルダに格納されたPNG素材に紐づく設定を行います。

設定は `setting.json` にて行います。

このファイルはJSON形式で記述されるもので、詳細を確認したい方は[こちらのサイト](https://developer.mozilla.org/ja/docs/Learn/JavaScript/Objects/JSON)などをご覧ください。

##### 設定できる内容

`setting.json` にて設定できる内容と設定値例は以下の通りです。

例以外にもご自由に設定いただけます。

- コメント（comments）: チャットの中に含まれていた場合にギフトを表示したい単語を設定します。
  - 文字の場合
    - こんにちは
    - 初見
    - www
  - 絵文字の場合（前後の「:」を忘れずに）
    - `:snail:`
    - `:egg2`
    - `:red_heart:`
- 表示レイヤー（layer）: 複数のギフトが重なって表示される際に、どちらが上になるか設定します。（数が大きいほうが手前）
  - 設定なし（デフォルト: 0）
  - 100
  - -100
- 表示時間（time）: 画面にどれぐらい表示され続けてほしいかを設定します。（単位は秒）
  - 設定なし（デフォルト: 無限。表示され続け、消えません）
  - 5
  - 10
- 制限数（limit）: 1通のチャットに同じワードがある場合、いくつまで表示させるかを設定します。
  - 設定なし（デフォルト: 無制限）
  - 1
  - 10

##### 具体的な設定方法

参考素材として登録されている「コンサートライト」、「草」の設定を例に、実際の設定を説明します。

「"」や「,」など記号の位置、数が正しくなければ動作しないためご注意ください。

###### コンサートライト

```
{
    "comments": [
        "888",
        "!",
        "♪",
        ":musical_note:",
        ":musical_notes:"
    ],
    "layer": 100,
    "time": 10,
    "limit": 5
}
```

この場合、

- コメント: 「888」「!」「♪」「`:musical_note:`」「`:musical_notes:`」が含まれていればコンサートライトを出す
- レイヤー: 手前に出したいのでデフォルトの0よりもそれなりに大きめの100を設定
- 表示時間: 10秒間ライトが表示され続ける
- 制限数: 1チャットにどれだけ音符絵文字などがあっても5個まで表示

となります。

###### 草

```
{
    "comments": [
        "w",
        "ｗ",
        "W",
        "Ｗ",
        "くさ",
        "クサ",        
        "ｸｻ",
        "草",
        "笑"
    ],
    "layer": 50
}
```

この場合、

- コメント: 「w」「ｗ」「W」「Ｗ」（全角半角大文字小文字）「くさ」「クサ」「ｸｻ」「草」「笑」がチャットに含まれていれば草素材を表示
- レイヤー: デフォルトよりは手前、コンサートライトよりは後ろが良さそうなので50
- 表示時間: 設定されていないのでデフォルト。表示されたら消えることはなく、表示され続ける。
- 制限数: 設定されていないのでデフォルト。制限がなく、沢山の「w」が来るとその数だけ草が生える

となります。


#### 設定の読み込み

EGGではギフトの追加、削除を行った際にソフトへの読み込みを実行する必要があります。

EGGフォルダ内にある「load（load.exe）」を実行すれば読み込みが完了します。

`setting.json` に誤りがあると実行してもギフトが正しく表示されないことがあるので、動作がおかしいと感じた場合には設定をご確認ください。

